<!-- Modified template for batch scoring; user will insert questions later -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SQL MCQ Exam - With Batches</title>
</head>
<body>
<script>
/* This is a clean placeholder structure. Full logic will be added by ChatGPT later. */

// BATCH CONFIG
const QUESTIONS_PER_BATCH = 25;

// Placeholder question list (user will replace later)
let originalQuestions = [
    {
    "q": "Which SQL command is used to retrieve data from a database table?",
    "options": [
      "GET",
      "FETCH",
      "SELECT",
      "OPEN TABLE"
    ],
    "answer": 2,
    "time": 20
  }


];

// Compute batch index from question number
function getBatchIndex(qIndex){
  return Math.floor(qIndex / QUESTIONS_PER_BATCH);
}

// Compute batch boundaries
function getBatchInfo(batchIndex){
  const start = batchIndex * QUESTIONS_PER_BATCH;
  const end = Math.min(start + QUESTIONS_PER_BATCH, originalQuestions.length);
  return { start, end };
}

// Compute score for a batch
function computeBatchScore(batchIndex, userAnswers, questions){
  const {start, end} = getBatchInfo(batchIndex);
  let correct = 0;

  for(let i=start; i<end; i++){
    if(userAnswers[i] !== null && userAnswers[i] === questions[i].answer){
      correct++;
    }
  }

  const total = end - start;
  const percentage = total > 0 ? (correct / total) * 100 : 0;

  return {
    batch: batchIndex + 1,
    correct,
    total,
    percentage: percentage.toFixed(2)
  };
}

// --- Batch Support Added ---
const QUESTIONS_PER_BATCH = 25;
function getBatchIndex(qIndex){ return Math.floor(qIndex / QUESTIONS_PER_BATCH); }
function getBatchInfo(batchIndex){ const start = batchIndex * QUESTIONS_PER_BATCH; const end = Math.min(start + QUESTIONS_PER_BATCH, questions.length); return {start,end}; }
function computeBatchScore(batchIndex){ const {start,end}=getBatchInfo(batchIndex); let correct=0; for(let i=start;i<end;i++){ if(userAnswers[i]!==null && userAnswers[i]===questions[i].answer) correct++; } return {batch:batchIndex+1, correct, total:end-start, percent:((correct/(end-start))*100).toFixed(2)}; }
</script>

<!-- Batch Navigation UI -->
<div id="batchNav" style="margin:20px;"></div>
<script>
// Create batch navigation buttons dynamically
function renderBatchNavigation(){
  const totalBatches = Math.ceil(originalQuestions.length / QUESTIONS_PER_BATCH);
  const navDiv = document.getElementById('batchNav');
  navDiv.innerHTML = '<h3>Select Batch</h3>';

  for(let b=0; b<totalBatches; b++){
    const btn = document.createElement('button');
    btn.innerText = `Start Batch ${b+1}`;
    btn.style.margin = '5px';
    btn.onclick = ()=>loadBatch(b);
    navDiv.appendChild(btn);
  }
}

// Load questions of a batch
function loadBatch(batchIndex){
  const info = getBatchInfo(batchIndex);
  alert(`Batch ${batchIndex+1} loaded. Questions ${info.start+1} to ${info.end}`);
  // Here you will later integrate display logic
}

renderBatchNavigation();
</script>
</body>
</html>
